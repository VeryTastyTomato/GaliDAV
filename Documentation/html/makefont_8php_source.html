<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GaliDAV:  Fichier source de /home/user/ÃƒÂ‰cole/Cours/Conduite et gestion de projet/GaliDAV/php2pdf/font/makefont/makefont.php</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GaliDAV
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- GÃ©nÃ©rÃ© par Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;donnÃ©es</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Variables&#160;globale</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/user/Ã‰cole/Cours/Conduite et gestion de projet/GaliDAV/php2pdf/font/makefont/makefont.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="makefont_8php.html">Aller Ã  la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/*******************************************************************************</span>
<a name="l00003"></a>00003 <span class="comment">* Utilitaire de génération de fichier de définition de police                  *</span>
<a name="l00004"></a>00004 <span class="comment">* Version : 1.13                                                               *</span>
<a name="l00005"></a>00005 <span class="comment">* Date :    31/12/2004                                                         *</span>
<a name="l00006"></a>00006 <span class="comment">*******************************************************************************/</span>
<a name="l00007"></a>00007 
<a name="l00008"></a><a class="code" href="makefont_8php.html#ae90b352d148d853ac7cb8488be9d199f">00008</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#ae90b352d148d853ac7cb8488be9d199f">ReadMap</a>($enc)
<a name="l00009"></a>00009 {
<a name="l00010"></a>00010     <span class="comment">//Read a map file</span>
<a name="l00011"></a>00011     $file=dirname(__FILE__).<span class="charliteral">&#39;/&#39;</span>.strtolower($enc).<span class="stringliteral">&#39;.map&#39;</span>;
<a name="l00012"></a>00012     $a=file($file);
<a name="l00013"></a>00013     <span class="keywordflow">if</span>(empty($a))
<a name="l00014"></a>00014         die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; encoding not found: &#39;</span>.$enc);
<a name="l00015"></a>00015     $cc2gn=array();
<a name="l00016"></a>00016     <span class="keywordflow">foreach</span>($a as $l)
<a name="l00017"></a>00017     {
<a name="l00018"></a>00018         <span class="keywordflow">if</span>($l{0}==<span class="charliteral">&#39;!&#39;</span>)
<a name="l00019"></a>00019         {
<a name="l00020"></a>00020             $e=preg_split(<span class="stringliteral">&#39;/[ \\t]+/&#39;</span>,rtrim($l));
<a name="l00021"></a>00021             $cc=hexdec(substr($e[0],1));
<a name="l00022"></a>00022             $gn=$e[2];
<a name="l00023"></a>00023             $cc2gn[$cc]=$gn;
<a name="l00024"></a>00024         }
<a name="l00025"></a>00025     }
<a name="l00026"></a>00026     <span class="keywordflow">for</span>($i=0;$i&lt;=255;$i++)
<a name="l00027"></a>00027     {
<a name="l00028"></a>00028         <span class="keywordflow">if</span>(!isset($cc2gn[$i]))
<a name="l00029"></a>00029             $cc2gn[$i]=<span class="stringliteral">&#39;.notdef&#39;</span>;
<a name="l00030"></a>00030     }
<a name="l00031"></a>00031     <span class="keywordflow">return</span> $cc2gn;
<a name="l00032"></a>00032 }
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="makefont_8php.html#a05153df7750f31a517f7fab3b0afb1a7">00034</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a05153df7750f31a517f7fab3b0afb1a7">ReadAFM</a>($file,&amp;$map)
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036     <span class="comment">//Read a font metric file</span>
<a name="l00037"></a>00037     $a=file($file);
<a name="l00038"></a>00038     <span class="keywordflow">if</span>(empty($a))
<a name="l00039"></a>00039         die(<span class="stringliteral">&#39;File not found&#39;</span>);
<a name="l00040"></a>00040     $widths=array();
<a name="l00041"></a>00041     $fm=array();
<a name="l00042"></a>00042     $fix=array(<span class="stringliteral">&#39;Edot&#39;</span>=&gt;<span class="stringliteral">&#39;Edotaccent&#39;</span>,<span class="stringliteral">&#39;edot&#39;</span>=&gt;<span class="stringliteral">&#39;edotaccent&#39;</span>,<span class="stringliteral">&#39;Idot&#39;</span>=&gt;<span class="stringliteral">&#39;Idotaccent&#39;</span>,<span class="stringliteral">&#39;Zdot&#39;</span>=&gt;<span class="stringliteral">&#39;Zdotaccent&#39;</span>,<span class="stringliteral">&#39;zdot&#39;</span>=&gt;<span class="stringliteral">&#39;zdotaccent&#39;</span>,
<a name="l00043"></a>00043         <span class="stringliteral">&#39;Odblacute&#39;</span>=&gt;<span class="stringliteral">&#39;Ohungarumlaut&#39;</span>,<span class="stringliteral">&#39;odblacute&#39;</span>=&gt;<span class="stringliteral">&#39;ohungarumlaut&#39;</span>,<span class="stringliteral">&#39;Udblacute&#39;</span>=&gt;<span class="stringliteral">&#39;Uhungarumlaut&#39;</span>,<span class="stringliteral">&#39;udblacute&#39;</span>=&gt;<span class="stringliteral">&#39;uhungarumlaut&#39;</span>,
<a name="l00044"></a>00044         <span class="stringliteral">&#39;Gcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;Gcommaaccent&#39;</span>,<span class="stringliteral">&#39;gcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;gcommaaccent&#39;</span>,<span class="stringliteral">&#39;Kcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;Kcommaaccent&#39;</span>,<span class="stringliteral">&#39;kcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;kcommaaccent&#39;</span>,
<a name="l00045"></a>00045         <span class="stringliteral">&#39;Lcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;Lcommaaccent&#39;</span>,<span class="stringliteral">&#39;lcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;lcommaaccent&#39;</span>,<span class="stringliteral">&#39;Ncedilla&#39;</span>=&gt;<span class="stringliteral">&#39;Ncommaaccent&#39;</span>,<span class="stringliteral">&#39;ncedilla&#39;</span>=&gt;<span class="stringliteral">&#39;ncommaaccent&#39;</span>,
<a name="l00046"></a>00046         <span class="stringliteral">&#39;Rcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;Rcommaaccent&#39;</span>,<span class="stringliteral">&#39;rcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;rcommaaccent&#39;</span>,<span class="stringliteral">&#39;Scedilla&#39;</span>=&gt;<span class="stringliteral">&#39;Scommaaccent&#39;</span>,<span class="stringliteral">&#39;scedilla&#39;</span>=&gt;<span class="stringliteral">&#39;scommaaccent&#39;</span>,
<a name="l00047"></a>00047         <span class="stringliteral">&#39;Tcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;Tcommaaccent&#39;</span>,<span class="stringliteral">&#39;tcedilla&#39;</span>=&gt;<span class="stringliteral">&#39;tcommaaccent&#39;</span>,<span class="stringliteral">&#39;Dslash&#39;</span>=&gt;<span class="stringliteral">&#39;Dcroat&#39;</span>,<span class="stringliteral">&#39;dslash&#39;</span>=&gt;<span class="stringliteral">&#39;dcroat&#39;</span>,<span class="stringliteral">&#39;Dmacron&#39;</span>=&gt;<span class="stringliteral">&#39;Dcroat&#39;</span>,<span class="stringliteral">&#39;dmacron&#39;</span>=&gt;<span class="stringliteral">&#39;dcroat&#39;</span>,
<a name="l00048"></a>00048         <span class="stringliteral">&#39;combininggraveaccent&#39;</span>=&gt;<span class="stringliteral">&#39;gravecomb&#39;</span>,<span class="stringliteral">&#39;combininghookabove&#39;</span>=&gt;<span class="stringliteral">&#39;hookabovecomb&#39;</span>,<span class="stringliteral">&#39;combiningtildeaccent&#39;</span>=&gt;<span class="stringliteral">&#39;tildecomb&#39;</span>,
<a name="l00049"></a>00049         <span class="stringliteral">&#39;combiningacuteaccent&#39;</span>=&gt;<span class="stringliteral">&#39;acutecomb&#39;</span>,<span class="stringliteral">&#39;combiningdotbelow&#39;</span>=&gt;<span class="stringliteral">&#39;dotbelowcomb&#39;</span>,<span class="stringliteral">&#39;dongsign&#39;</span>=&gt;<span class="stringliteral">&#39;dong&#39;</span>);
<a name="l00050"></a>00050     <span class="keywordflow">foreach</span>($a as $l)
<a name="l00051"></a>00051     {
<a name="l00052"></a>00052         $e=explode(<span class="charliteral">&#39; &#39;</span>,rtrim($l));
<a name="l00053"></a>00053         <span class="keywordflow">if</span>(count($e)&lt;2)
<a name="l00054"></a>00054             <span class="keywordflow">continue</span>;
<a name="l00055"></a>00055         $code=$e[0];
<a name="l00056"></a>00056         $param=$e[1];
<a name="l00057"></a>00057         <span class="keywordflow">if</span>($code==<span class="charliteral">&#39;C&#39;</span>)
<a name="l00058"></a>00058         {
<a name="l00059"></a>00059             <span class="comment">//Character metrics</span>
<a name="l00060"></a>00060             $cc=(int)$e[1];
<a name="l00061"></a>00061             $w=$e[4];
<a name="l00062"></a>00062             $gn=$e[7];
<a name="l00063"></a>00063             <span class="keywordflow">if</span>(substr($gn,-4)==<span class="stringliteral">&#39;20AC&#39;</span>)
<a name="l00064"></a>00064                 $gn=<span class="stringliteral">&#39;Euro&#39;</span>;
<a name="l00065"></a>00065             <span class="keywordflow">if</span>(isset($fix[$gn]))
<a name="l00066"></a>00066             {
<a name="l00067"></a>00067                 <span class="comment">//Fix incorrect glyph name</span>
<a name="l00068"></a>00068                 <span class="keywordflow">foreach</span>($map as $c=&gt;$n)
<a name="l00069"></a>00069                 {
<a name="l00070"></a>00070                     <span class="keywordflow">if</span>($n==$fix[$gn])
<a name="l00071"></a>00071                         $map[$c]=$gn;
<a name="l00072"></a>00072                 }
<a name="l00073"></a>00073             }
<a name="l00074"></a>00074             <span class="keywordflow">if</span>(empty($map))
<a name="l00075"></a>00075             {
<a name="l00076"></a>00076                 <span class="comment">//Symbolic font: use built-in encoding</span>
<a name="l00077"></a>00077                 $widths[$cc]=$w;
<a name="l00078"></a>00078             }
<a name="l00079"></a>00079             <span class="keywordflow">else</span>
<a name="l00080"></a>00080             {
<a name="l00081"></a>00081                 $widths[$gn]=$w;
<a name="l00082"></a>00082                 <span class="keywordflow">if</span>($gn==<span class="charliteral">&#39;X&#39;</span>)
<a name="l00083"></a>00083                     $fm[<span class="stringliteral">&#39;CapXHeight&#39;</span>]=$e[13];
<a name="l00084"></a>00084             }
<a name="l00085"></a>00085             <span class="keywordflow">if</span>($gn==<span class="stringliteral">&#39;.notdef&#39;</span>)
<a name="l00086"></a>00086                 $fm[<span class="stringliteral">&#39;MissingWidth&#39;</span>]=$w;
<a name="l00087"></a>00087         }
<a name="l00088"></a>00088         elseif($code==<span class="stringliteral">&#39;FontName&#39;</span>)
<a name="l00089"></a>00089             $fm[<span class="stringliteral">&#39;FontName&#39;</span>]=$param;
<a name="l00090"></a>00090         elseif($code==<span class="stringliteral">&#39;Weight&#39;</span>)
<a name="l00091"></a>00091             $fm[<span class="stringliteral">&#39;Weight&#39;</span>]=$param;
<a name="l00092"></a>00092         elseif($code==<span class="stringliteral">&#39;ItalicAngle&#39;</span>)
<a name="l00093"></a>00093             $fm[<span class="stringliteral">&#39;ItalicAngle&#39;</span>]=(double)$param;
<a name="l00094"></a>00094         elseif($code==<span class="stringliteral">&#39;Ascender&#39;</span>)
<a name="l00095"></a>00095             $fm[<span class="stringliteral">&#39;Ascender&#39;</span>]=(int)$param;
<a name="l00096"></a>00096         elseif($code==<span class="stringliteral">&#39;Descender&#39;</span>)
<a name="l00097"></a>00097             $fm[<span class="stringliteral">&#39;Descender&#39;</span>]=(int)$param;
<a name="l00098"></a>00098         elseif($code==<span class="stringliteral">&#39;UnderlineThickness&#39;</span>)
<a name="l00099"></a>00099             $fm[<span class="stringliteral">&#39;UnderlineThickness&#39;</span>]=(int)$param;
<a name="l00100"></a>00100         elseif($code==<span class="stringliteral">&#39;UnderlinePosition&#39;</span>)
<a name="l00101"></a>00101             $fm[<span class="stringliteral">&#39;UnderlinePosition&#39;</span>]=(int)$param;
<a name="l00102"></a>00102         elseif($code==<span class="stringliteral">&#39;IsFixedPitch&#39;</span>)
<a name="l00103"></a>00103             $fm[<span class="stringliteral">&#39;IsFixedPitch&#39;</span>]=($param==<span class="stringliteral">&#39;true&#39;</span>);
<a name="l00104"></a>00104         elseif($code==<span class="stringliteral">&#39;FontBBox&#39;</span>)
<a name="l00105"></a>00105             $fm[<span class="stringliteral">&#39;FontBBox&#39;</span>]=array($e[1],$e[2],$e[3],$e[4]);
<a name="l00106"></a>00106         elseif($code==<span class="stringliteral">&#39;CapHeight&#39;</span>)
<a name="l00107"></a>00107             $fm[<span class="stringliteral">&#39;CapHeight&#39;</span>]=(int)$param;
<a name="l00108"></a>00108         elseif($code==<span class="stringliteral">&#39;StdVW&#39;</span>)
<a name="l00109"></a>00109             $fm[<span class="stringliteral">&#39;StdVW&#39;</span>]=(int)$param;
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111     <span class="keywordflow">if</span>(!isset($fm[<span class="stringliteral">&#39;FontName&#39;</span>]))
<a name="l00112"></a>00112         die(<span class="stringliteral">&#39;FontName not found&#39;</span>);
<a name="l00113"></a>00113     <span class="keywordflow">if</span>(!empty($map))
<a name="l00114"></a>00114     {
<a name="l00115"></a>00115         <span class="keywordflow">if</span>(!isset($widths[<span class="stringliteral">&#39;.notdef&#39;</span>]))
<a name="l00116"></a>00116             $widths[<span class="stringliteral">&#39;.notdef&#39;</span>]=600;
<a name="l00117"></a>00117         <span class="keywordflow">if</span>(!isset($widths[<span class="stringliteral">&#39;Delta&#39;</span>]) and isset($widths[<span class="stringliteral">&#39;increment&#39;</span>]))
<a name="l00118"></a>00118             $widths[<span class="stringliteral">&#39;Delta&#39;</span>]=$widths[<span class="stringliteral">&#39;increment&#39;</span>];
<a name="l00119"></a>00119         <span class="comment">//Order widths according to map</span>
<a name="l00120"></a>00120         <span class="keywordflow">for</span>($i=0;$i&lt;=255;$i++)
<a name="l00121"></a>00121         {
<a name="l00122"></a>00122             <span class="keywordflow">if</span>(!isset($widths[$map[$i]]))
<a name="l00123"></a>00123             {
<a name="l00124"></a>00124                 echo <span class="stringliteral">&#39;&lt;B&gt;Warning:&lt;/B&gt; character &#39;</span>.$map[$i].<span class="stringliteral">&#39; is missing&lt;BR&gt;&#39;</span>;
<a name="l00125"></a>00125                 $widths[$i]=$widths[<span class="stringliteral">&#39;.notdef&#39;</span>];
<a name="l00126"></a>00126             }
<a name="l00127"></a>00127             <span class="keywordflow">else</span>
<a name="l00128"></a>00128                 $widths[$i]=$widths[$map[$i]];
<a name="l00129"></a>00129         }
<a name="l00130"></a>00130     }
<a name="l00131"></a>00131     $fm[<span class="stringliteral">&#39;Widths&#39;</span>]=$widths;
<a name="l00132"></a>00132     <span class="keywordflow">return</span> $fm;
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="makefont_8php.html#a6e3d2e58bb5546f47003a43606f89324">00135</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a6e3d2e58bb5546f47003a43606f89324">MakeFontDescriptor</a>($fm,$symbolic)
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <span class="comment">//Ascent</span>
<a name="l00138"></a>00138     $asc=(isset($fm[<span class="stringliteral">&#39;Ascender&#39;</span>]) ? $fm[<span class="stringliteral">&#39;Ascender&#39;</span>] : 1000);
<a name="l00139"></a>00139     $fd=<span class="stringliteral">&quot;array(&#39;Ascent&#39;=&gt;&quot;</span>.$asc;
<a name="l00140"></a>00140     <span class="comment">//Descent</span>
<a name="l00141"></a>00141     $desc=(isset($fm[<span class="stringliteral">&#39;Descender&#39;</span>]) ? $fm[<span class="stringliteral">&#39;Descender&#39;</span>] : -200);
<a name="l00142"></a>00142     $fd.=<span class="stringliteral">&quot;,&#39;Descent&#39;=&gt;&quot;</span>.$desc;
<a name="l00143"></a>00143     <span class="comment">//CapHeight</span>
<a name="l00144"></a>00144     <span class="keywordflow">if</span>(isset($fm[<span class="stringliteral">&#39;CapHeight&#39;</span>]))
<a name="l00145"></a>00145         $ch=$fm[<span class="stringliteral">&#39;CapHeight&#39;</span>];
<a name="l00146"></a>00146     elseif(isset($fm[<span class="stringliteral">&#39;CapXHeight&#39;</span>]))
<a name="l00147"></a>00147         $ch=$fm[<span class="stringliteral">&#39;CapXHeight&#39;</span>];
<a name="l00148"></a>00148     <span class="keywordflow">else</span>
<a name="l00149"></a>00149         $ch=$asc;
<a name="l00150"></a>00150     $fd.=<span class="stringliteral">&quot;,&#39;CapHeight&#39;=&gt;&quot;</span>.$ch;
<a name="l00151"></a>00151     <span class="comment">//Flags</span>
<a name="l00152"></a>00152     $flags=0;
<a name="l00153"></a>00153     <span class="keywordflow">if</span>(isset($fm[<span class="stringliteral">&#39;IsFixedPitch&#39;</span>]) and $fm[<span class="stringliteral">&#39;IsFixedPitch&#39;</span>])
<a name="l00154"></a>00154         $flags+=1&lt;&lt;0;
<a name="l00155"></a>00155     <span class="keywordflow">if</span>($symbolic)
<a name="l00156"></a>00156         $flags+=1&lt;&lt;2;
<a name="l00157"></a>00157     <span class="keywordflow">if</span>(!$symbolic)
<a name="l00158"></a>00158         $flags+=1&lt;&lt;5;
<a name="l00159"></a>00159     <span class="keywordflow">if</span>(isset($fm[<span class="stringliteral">&#39;ItalicAngle&#39;</span>]) and $fm[<span class="stringliteral">&#39;ItalicAngle&#39;</span>]!=0)
<a name="l00160"></a>00160         $flags+=1&lt;&lt;6;
<a name="l00161"></a>00161     $fd.=<span class="stringliteral">&quot;,&#39;Flags&#39;=&gt;&quot;</span>.$flags;
<a name="l00162"></a>00162     <span class="comment">//FontBBox</span>
<a name="l00163"></a>00163     <span class="keywordflow">if</span>(isset($fm[<span class="stringliteral">&#39;FontBBox&#39;</span>]))
<a name="l00164"></a>00164         $fbb=$fm[<span class="stringliteral">&#39;FontBBox&#39;</span>];
<a name="l00165"></a>00165     <span class="keywordflow">else</span>
<a name="l00166"></a>00166         $fbb=array(0,$des-100,1000,$asc+100);
<a name="l00167"></a>00167     $fd.=<span class="stringliteral">&quot;,&#39;FontBBox&#39;=&gt;&#39;[&quot;</span>.$fbb[0].<span class="charliteral">&#39; &#39;</span>.$fbb[1].<span class="charliteral">&#39; &#39;</span>.$fbb[2].<span class="charliteral">&#39; &#39;</span>.$fbb[3].<span class="stringliteral">&quot;]&#39;&quot;</span>;
<a name="l00168"></a>00168     <span class="comment">//ItalicAngle</span>
<a name="l00169"></a>00169     $ia=(isset($fm[<span class="stringliteral">&#39;ItalicAngle&#39;</span>]) ? $fm[<span class="stringliteral">&#39;ItalicAngle&#39;</span>] : 0);
<a name="l00170"></a>00170     $fd.=<span class="stringliteral">&quot;,&#39;ItalicAngle&#39;=&gt;&quot;</span>.$ia;
<a name="l00171"></a>00171     <span class="comment">//StemV</span>
<a name="l00172"></a>00172     <span class="keywordflow">if</span>(isset($fm[<span class="stringliteral">&#39;StdVW&#39;</span>]))
<a name="l00173"></a>00173         $stemv=$fm[<span class="stringliteral">&#39;StdVW&#39;</span>];
<a name="l00174"></a>00174     elseif(isset($fm[<span class="stringliteral">&#39;Weight&#39;</span>]) and eregi(<span class="stringliteral">&#39;(bold|black)&#39;</span>,$fm[<span class="stringliteral">&#39;Weight&#39;</span>]))
<a name="l00175"></a>00175         $stemv=120;
<a name="l00176"></a>00176     <span class="keywordflow">else</span>
<a name="l00177"></a>00177         $stemv=70;
<a name="l00178"></a>00178     $fd.=<span class="stringliteral">&quot;,&#39;StemV&#39;=&gt;&quot;</span>.$stemv;
<a name="l00179"></a>00179     <span class="comment">//MissingWidth</span>
<a name="l00180"></a>00180     <span class="keywordflow">if</span>(isset($fm[<span class="stringliteral">&#39;MissingWidth&#39;</span>]))
<a name="l00181"></a>00181         $fd.=<span class="stringliteral">&quot;,&#39;MissingWidth&#39;=&gt;&quot;</span>.$fm[<span class="stringliteral">&#39;MissingWidth&#39;</span>];
<a name="l00182"></a>00182     $fd.=<span class="charliteral">&#39;)&#39;</span>;
<a name="l00183"></a>00183     <span class="keywordflow">return</span> $fd;
<a name="l00184"></a>00184 }
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="makefont_8php.html#a40178149f9fc4ceefe18e85a8ee72b5d">00186</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a40178149f9fc4ceefe18e85a8ee72b5d">MakeWidthArray</a>($fm)
<a name="l00187"></a>00187 {
<a name="l00188"></a>00188     <span class="comment">//Make character width array</span>
<a name="l00189"></a>00189     $s=<span class="stringliteral">&quot;array(\n\t&quot;</span>;
<a name="l00190"></a>00190     $cw=$fm[<span class="stringliteral">&#39;Widths&#39;</span>];
<a name="l00191"></a>00191     <span class="keywordflow">for</span>($i=0;$i&lt;=255;$i++)
<a name="l00192"></a>00192     {
<a name="l00193"></a>00193         <span class="keywordflow">if</span>(chr($i)==<span class="stringliteral">&quot;&#39;&quot;</span>)
<a name="l00194"></a>00194             $s.=<span class="stringliteral">&quot;&#39;\\&#39;&#39;&quot;</span>;
<a name="l00195"></a>00195         elseif(chr($i)==<span class="stringliteral">&quot;\\&quot;</span>)
<a name="l00196"></a>00196             $s.=<span class="stringliteral">&quot;&#39;\\\\&#39;&quot;</span>;
<a name="l00197"></a>00197         elseif($i&gt;=32 and $i&lt;=126)
<a name="l00198"></a>00198             $s.=<span class="stringliteral">&quot;&#39;&quot;</span>.chr($i).<span class="stringliteral">&quot;&#39;&quot;</span>;
<a name="l00199"></a>00199         <span class="keywordflow">else</span>
<a name="l00200"></a>00200             $s.=<span class="stringliteral">&quot;chr($i)&quot;</span>;
<a name="l00201"></a>00201         $s.=<span class="stringliteral">&#39;=&gt;&#39;</span>.$fm[<span class="stringliteral">&#39;Widths&#39;</span>][$i];
<a name="l00202"></a>00202         <span class="keywordflow">if</span>($i&lt;255)
<a name="l00203"></a>00203             $s.=<span class="charliteral">&#39;,&#39;</span>;
<a name="l00204"></a>00204         <span class="keywordflow">if</span>(($i+1)%22==0)
<a name="l00205"></a>00205             $s.=<span class="stringliteral">&quot;\n\t&quot;</span>;
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207     $s.=<span class="charliteral">&#39;)&#39;</span>;
<a name="l00208"></a>00208     <span class="keywordflow">return</span> $s;
<a name="l00209"></a>00209 }
<a name="l00210"></a>00210 
<a name="l00211"></a><a class="code" href="makefont_8php.html#a6a51afba9135056d951a104d55f6af12">00211</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a6a51afba9135056d951a104d55f6af12">MakeFontEncoding</a>($map)
<a name="l00212"></a>00212 {
<a name="l00213"></a>00213     <span class="comment">//Build differences from reference encoding</span>
<a name="l00214"></a>00214     $ref=<a class="code" href="makefont_8php.html#ae90b352d148d853ac7cb8488be9d199f">ReadMap</a>(<span class="stringliteral">&#39;cp1252&#39;</span>);
<a name="l00215"></a>00215     $s=<span class="stringliteral">&#39;&#39;</span>;
<a name="l00216"></a>00216     $last=0;
<a name="l00217"></a>00217     <span class="keywordflow">for</span>($i=32;$i&lt;=255;$i++)
<a name="l00218"></a>00218     {
<a name="l00219"></a>00219         <span class="keywordflow">if</span>($map[$i]!=$ref[$i])
<a name="l00220"></a>00220         {
<a name="l00221"></a>00221             <span class="keywordflow">if</span>($i!=$last+1)
<a name="l00222"></a>00222                 $s.=$i.<span class="charliteral">&#39; &#39;</span>;
<a name="l00223"></a>00223             $last=$i;
<a name="l00224"></a>00224             $s.=<span class="charliteral">&#39;/&#39;</span>.$map[$i].<span class="charliteral">&#39; &#39;</span>;
<a name="l00225"></a>00225         }
<a name="l00226"></a>00226     }
<a name="l00227"></a>00227     <span class="keywordflow">return</span> rtrim($s);
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00230"></a><a class="code" href="makefont_8php.html#a0b22290f31db868e1cae064d136b59af">00230</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a0b22290f31db868e1cae064d136b59af">SaveToFile</a>($file,$s,$mode=<span class="charliteral">&#39;t&#39;</span>)
<a name="l00231"></a>00231 {
<a name="l00232"></a>00232     $f=fopen($file,<span class="charliteral">&#39;w&#39;</span>.$mode);
<a name="l00233"></a>00233     <span class="keywordflow">if</span>(!$f)
<a name="l00234"></a>00234         die(<span class="stringliteral">&#39;Can\&#39;t write to file &#39;</span>.$file);
<a name="l00235"></a>00235     fwrite($f,$s,strlen($s));
<a name="l00236"></a>00236     fclose($f);
<a name="l00237"></a>00237 }
<a name="l00238"></a>00238 
<a name="l00239"></a><a class="code" href="makefont_8php.html#a6d8bd1fd7e2f3ecdc21ef2b31566b4c0">00239</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a6d8bd1fd7e2f3ecdc21ef2b31566b4c0">ReadShort</a>($f)
<a name="l00240"></a>00240 {
<a name="l00241"></a>00241     $a=unpack(<span class="stringliteral">&#39;n1n&#39;</span>,fread($f,2));
<a name="l00242"></a>00242     <span class="keywordflow">return</span> $a[<span class="charliteral">&#39;n&#39;</span>];
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00245"></a><a class="code" href="makefont_8php.html#a75e09243fcc909c5e7eee12a1a8443ce">00245</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a75e09243fcc909c5e7eee12a1a8443ce">ReadLong</a>($f)
<a name="l00246"></a>00246 {
<a name="l00247"></a>00247     $a=unpack(<span class="stringliteral">&#39;N1N&#39;</span>,fread($f,4));
<a name="l00248"></a>00248     <span class="keywordflow">return</span> $a[<span class="charliteral">&#39;N&#39;</span>];
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 
<a name="l00251"></a><a class="code" href="makefont_8php.html#a77e282eb3da32ac811d34defeb16c071">00251</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a77e282eb3da32ac811d34defeb16c071">CheckTTF</a>($file)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253     <span class="comment">//Check if font license allows embedding</span>
<a name="l00254"></a>00254     $f=fopen($file,<span class="stringliteral">&#39;rb&#39;</span>);
<a name="l00255"></a>00255     <span class="keywordflow">if</span>(!$f)
<a name="l00256"></a>00256         die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; Can\&#39;t open &#39;</span>.$file);
<a name="l00257"></a>00257     <span class="comment">//Extract number of tables</span>
<a name="l00258"></a>00258     fseek($f,4,SEEK_CUR);
<a name="l00259"></a>00259     $nb=<a class="code" href="makefont_8php.html#a6d8bd1fd7e2f3ecdc21ef2b31566b4c0">ReadShort</a>($f);
<a name="l00260"></a>00260     fseek($f,6,SEEK_CUR);
<a name="l00261"></a>00261     <span class="comment">//Seek OS/2 table</span>
<a name="l00262"></a>00262     $found=<span class="keyword">false</span>;
<a name="l00263"></a>00263     <span class="keywordflow">for</span>($i=0;$i&lt;$nb;$i++)
<a name="l00264"></a>00264     {
<a name="l00265"></a>00265         <span class="keywordflow">if</span>(fread($f,4)==<span class="stringliteral">&#39;OS/2&#39;</span>)
<a name="l00266"></a>00266         {
<a name="l00267"></a>00267             $found=<span class="keyword">true</span>;
<a name="l00268"></a>00268             <span class="keywordflow">break</span>;
<a name="l00269"></a>00269         }
<a name="l00270"></a>00270         fseek($f,12,SEEK_CUR);
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272     <span class="keywordflow">if</span>(!$found)
<a name="l00273"></a>00273     {
<a name="l00274"></a>00274         fclose($f);
<a name="l00275"></a>00275         <span class="keywordflow">return</span>;
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277     fseek($f,4,SEEK_CUR);
<a name="l00278"></a>00278     $offset=<a class="code" href="makefont_8php.html#a75e09243fcc909c5e7eee12a1a8443ce">ReadLong</a>($f);
<a name="l00279"></a>00279     fseek($f,$offset,SEEK_SET);
<a name="l00280"></a>00280     <span class="comment">//Extract fsType flags</span>
<a name="l00281"></a>00281     fseek($f,8,SEEK_CUR);
<a name="l00282"></a>00282     $fsType=<a class="code" href="makefont_8php.html#a6d8bd1fd7e2f3ecdc21ef2b31566b4c0">ReadShort</a>($f);
<a name="l00283"></a>00283     $rl=($fsType &amp; 0x02)!=0;
<a name="l00284"></a>00284     $pp=($fsType &amp; 0x04)!=0;
<a name="l00285"></a>00285     $e=($fsType &amp; 0x08)!=0;
<a name="l00286"></a>00286     fclose($f);
<a name="l00287"></a>00287     <span class="keywordflow">if</span>($rl and !$pp and !$e)
<a name="l00288"></a>00288         echo <span class="stringliteral">&#39;&lt;B&gt;Warning:&lt;/B&gt; font license does not allow embedding&#39;</span>;
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="comment">/*******************************************************************************</span>
<a name="l00292"></a>00292 <span class="comment">* $fontfile : chemin du fichier TTF (ou chaîne vide si pas d&#39;incorporation)    *</span>
<a name="l00293"></a>00293 <span class="comment">* $afmfile :  chemin du fichier AFM                                            *</span>
<a name="l00294"></a>00294 <span class="comment">* $enc :      encodage (ou chaîne vide si la police est symbolique)            *</span>
<a name="l00295"></a>00295 <span class="comment">* $patch :    patch optionnel pour l&#39;encodage                                  *</span>
<a name="l00296"></a>00296 <span class="comment">* $type :     type de la police si $fontfile est vide                          *</span>
<a name="l00297"></a>00297 <span class="comment">*******************************************************************************/</span>
<a name="l00298"></a><a class="code" href="makefont_8php.html#a8ee25a4dbcc0f5237a1d8a2a63f61a32">00298</a> <span class="keyword">function</span> <a class="code" href="makefont_8php.html#a8ee25a4dbcc0f5237a1d8a2a63f61a32">MakeFont</a>($fontfile,$afmfile,$enc=<span class="stringliteral">&#39;cp1252&#39;</span>,$patch=array(),$type=<span class="stringliteral">&#39;TrueType&#39;</span>)
<a name="l00299"></a>00299 {
<a name="l00300"></a>00300     <span class="comment">//Generate a font definition file</span>
<a name="l00301"></a>00301     set_magic_quotes_runtime(0);
<a name="l00302"></a>00302     ini_set(<span class="stringliteral">&#39;auto_detect_line_endings&#39;</span>,<span class="charliteral">&#39;1&#39;</span>);
<a name="l00303"></a>00303     <span class="keywordflow">if</span>($enc)
<a name="l00304"></a>00304     {
<a name="l00305"></a>00305         $map=<a class="code" href="makefont_8php.html#ae90b352d148d853ac7cb8488be9d199f">ReadMap</a>($enc);
<a name="l00306"></a>00306         <span class="keywordflow">foreach</span>($patch as $cc=&gt;$gn)
<a name="l00307"></a>00307             $map[$cc]=$gn;
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309     <span class="keywordflow">else</span>
<a name="l00310"></a>00310         $map=array();
<a name="l00311"></a>00311     <span class="keywordflow">if</span>(!file_exists($afmfile))
<a name="l00312"></a>00312         die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; AFM file not found: &#39;</span>.$afmfile);
<a name="l00313"></a>00313     $fm=<a class="code" href="makefont_8php.html#a05153df7750f31a517f7fab3b0afb1a7">ReadAFM</a>($afmfile,$map);
<a name="l00314"></a>00314     <span class="keywordflow">if</span>($enc)
<a name="l00315"></a>00315         $diff=<a class="code" href="makefont_8php.html#a6a51afba9135056d951a104d55f6af12">MakeFontEncoding</a>($map);
<a name="l00316"></a>00316     <span class="keywordflow">else</span>
<a name="l00317"></a>00317         $diff=<span class="stringliteral">&#39;&#39;</span>;
<a name="l00318"></a>00318     $fd=<a class="code" href="makefont_8php.html#a6e3d2e58bb5546f47003a43606f89324">MakeFontDescriptor</a>($fm,empty($map));
<a name="l00319"></a>00319     <span class="comment">//Find font type</span>
<a name="l00320"></a>00320     <span class="keywordflow">if</span>($fontfile)
<a name="l00321"></a>00321     {
<a name="l00322"></a>00322         $ext=strtolower(substr($fontfile,-3));
<a name="l00323"></a>00323         <span class="keywordflow">if</span>($ext==<span class="stringliteral">&#39;ttf&#39;</span>)
<a name="l00324"></a>00324             $type=<span class="stringliteral">&#39;TrueType&#39;</span>;
<a name="l00325"></a>00325         elseif($ext==<span class="stringliteral">&#39;pfb&#39;</span>)
<a name="l00326"></a>00326             $type=<span class="stringliteral">&#39;Type1&#39;</span>;
<a name="l00327"></a>00327         <span class="keywordflow">else</span>
<a name="l00328"></a>00328             die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; unrecognized font file extension: &#39;</span>.$ext);
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330     <span class="keywordflow">else</span>
<a name="l00331"></a>00331     {
<a name="l00332"></a>00332         <span class="keywordflow">if</span>($type!=<span class="stringliteral">&#39;TrueType&#39;</span> and $type!=<span class="stringliteral">&#39;Type1&#39;</span>)
<a name="l00333"></a>00333             die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; incorrect font type: &#39;</span>.$type);
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335     <span class="comment">//Start generation</span>
<a name="l00336"></a>00336     $s=<span class="stringliteral">&#39;&lt;?php&#39;</span>.<span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00337"></a>00337     $s.=<span class="stringliteral">&#39;$type=\&#39;&#39;</span>.$type.<span class="stringliteral">&quot;&#39;;\n&quot;</span>;
<a name="l00338"></a>00338     $s.=<span class="stringliteral">&#39;$name=\&#39;&#39;</span>.$fm[<span class="stringliteral">&#39;FontName&#39;</span>].<span class="stringliteral">&quot;&#39;;\n&quot;</span>;
<a name="l00339"></a>00339     $s.=<span class="stringliteral">&#39;$desc=&#39;</span>.$fd.<span class="stringliteral">&quot;;\n&quot;</span>;
<a name="l00340"></a>00340     <span class="keywordflow">if</span>(!isset($fm[<span class="stringliteral">&#39;UnderlinePosition&#39;</span>]))
<a name="l00341"></a>00341         $fm[<span class="stringliteral">&#39;UnderlinePosition&#39;</span>]=-100;
<a name="l00342"></a>00342     <span class="keywordflow">if</span>(!isset($fm[<span class="stringliteral">&#39;UnderlineThickness&#39;</span>]))
<a name="l00343"></a>00343         $fm[<span class="stringliteral">&#39;UnderlineThickness&#39;</span>]=50;
<a name="l00344"></a>00344     $s.=<span class="stringliteral">&#39;$up=&#39;</span>.$fm[<span class="stringliteral">&#39;UnderlinePosition&#39;</span>].<span class="stringliteral">&quot;;\n&quot;</span>;
<a name="l00345"></a>00345     $s.=<span class="stringliteral">&#39;$ut=&#39;</span>.$fm[<span class="stringliteral">&#39;UnderlineThickness&#39;</span>].<span class="stringliteral">&quot;;\n&quot;</span>;
<a name="l00346"></a>00346     $w=<a class="code" href="makefont_8php.html#a40178149f9fc4ceefe18e85a8ee72b5d">MakeWidthArray</a>($fm);
<a name="l00347"></a>00347     $s.=<span class="stringliteral">&#39;$cw=&#39;</span>.$w.<span class="stringliteral">&quot;;\n&quot;</span>;
<a name="l00348"></a>00348     $s.=<span class="stringliteral">&#39;$enc=\&#39;&#39;</span>.$enc.<span class="stringliteral">&quot;&#39;;\n&quot;</span>;
<a name="l00349"></a>00349     $s.=<span class="stringliteral">&#39;$diff=\&#39;&#39;</span>.$diff.<span class="stringliteral">&quot;&#39;;\n&quot;</span>;
<a name="l00350"></a>00350     $basename=substr(basename($afmfile),0,-4);
<a name="l00351"></a>00351     <span class="keywordflow">if</span>($fontfile)
<a name="l00352"></a>00352     {
<a name="l00353"></a>00353         <span class="comment">//Embedded font</span>
<a name="l00354"></a>00354         <span class="keywordflow">if</span>(!file_exists($fontfile))
<a name="l00355"></a>00355             die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; font file not found: &#39;</span>.$fontfile);
<a name="l00356"></a>00356         <span class="keywordflow">if</span>($type==<span class="stringliteral">&#39;TrueType&#39;</span>)
<a name="l00357"></a>00357             <a class="code" href="makefont_8php.html#a77e282eb3da32ac811d34defeb16c071">CheckTTF</a>($fontfile);
<a name="l00358"></a>00358         $f=fopen($fontfile,<span class="stringliteral">&#39;rb&#39;</span>);
<a name="l00359"></a>00359         <span class="keywordflow">if</span>(!$f)
<a name="l00360"></a>00360             die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; Can\&#39;t open &#39;</span>.$fontfile);
<a name="l00361"></a>00361         $file=fread($f,filesize($fontfile));
<a name="l00362"></a>00362         fclose($f);
<a name="l00363"></a>00363         <span class="keywordflow">if</span>($type==<span class="stringliteral">&#39;Type1&#39;</span>)
<a name="l00364"></a>00364         {
<a name="l00365"></a>00365             <span class="comment">//Find first two sections and discard third one</span>
<a name="l00366"></a>00366             $header=(ord($file{0})==128);
<a name="l00367"></a>00367             <span class="keywordflow">if</span>($header)
<a name="l00368"></a>00368             {
<a name="l00369"></a>00369                 <span class="comment">//Strip first binary header</span>
<a name="l00370"></a>00370                 $file=substr($file,6);
<a name="l00371"></a>00371             }
<a name="l00372"></a>00372             $pos=strpos($file,<span class="stringliteral">&#39;eexec&#39;</span>);
<a name="l00373"></a>00373             <span class="keywordflow">if</span>(!$pos)
<a name="l00374"></a>00374                 die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; font file does not seem to be valid Type1&#39;</span>);
<a name="l00375"></a>00375             $size1=$pos+6;
<a name="l00376"></a>00376             <span class="keywordflow">if</span>($header and ord($file{$size1})==128)
<a name="l00377"></a>00377             {
<a name="l00378"></a>00378                 <span class="comment">//Strip second binary header</span>
<a name="l00379"></a>00379                 $file=substr($file,0,$size1).substr($file,$size1+6);
<a name="l00380"></a>00380             }
<a name="l00381"></a>00381             $pos=strpos($file,<span class="stringliteral">&#39;00000000&#39;</span>);
<a name="l00382"></a>00382             <span class="keywordflow">if</span>(!$pos)
<a name="l00383"></a>00383                 die(<span class="stringliteral">&#39;&lt;B&gt;Error:&lt;/B&gt; font file does not seem to be valid Type1&#39;</span>);
<a name="l00384"></a>00384             $size2=$pos-$size1;
<a name="l00385"></a>00385             $file=substr($file,0,$size1+$size2);
<a name="l00386"></a>00386         }
<a name="l00387"></a>00387         <span class="keywordflow">if</span>(function_exists(<span class="stringliteral">&#39;gzcompress&#39;</span>))
<a name="l00388"></a>00388         {
<a name="l00389"></a>00389             $cmp=$basename.<span class="stringliteral">&#39;.z&#39;</span>;
<a name="l00390"></a>00390             <a class="code" href="makefont_8php.html#a0b22290f31db868e1cae064d136b59af">SaveToFile</a>($cmp,gzcompress($file),<span class="charliteral">&#39;b&#39;</span>);
<a name="l00391"></a>00391             $s.=<span class="stringliteral">&#39;$file=\&#39;&#39;</span>.$cmp.<span class="stringliteral">&quot;&#39;;\n&quot;</span>;
<a name="l00392"></a>00392             echo <span class="stringliteral">&#39;Font file compressed (&#39;</span>.$cmp.<span class="stringliteral">&#39;)&lt;BR&gt;&#39;</span>;
<a name="l00393"></a>00393         }
<a name="l00394"></a>00394         <span class="keywordflow">else</span>
<a name="l00395"></a>00395         {
<a name="l00396"></a>00396             $s.=<span class="stringliteral">&#39;$file=\&#39;&#39;</span>.basename($fontfile).<span class="stringliteral">&quot;&#39;;\n&quot;</span>;
<a name="l00397"></a>00397             echo <span class="stringliteral">&#39;&lt;B&gt;Notice:&lt;/B&gt; font file could not be compressed (zlib extension not available)&lt;BR&gt;&#39;</span>;
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399         <span class="keywordflow">if</span>($type==<span class="stringliteral">&#39;Type1&#39;</span>)
<a name="l00400"></a>00400         {
<a name="l00401"></a>00401             $s.=<span class="stringliteral">&#39;$size1=&#39;</span>.$size1.<span class="stringliteral">&quot;;\n&quot;</span>;
<a name="l00402"></a>00402             $s.=<span class="stringliteral">&#39;$size2=&#39;</span>.$size2.<span class="stringliteral">&quot;;\n&quot;</span>;
<a name="l00403"></a>00403         }
<a name="l00404"></a>00404         <span class="keywordflow">else</span>
<a name="l00405"></a>00405             $s.=<span class="stringliteral">&#39;$originalsize=&#39;</span>.filesize($fontfile).<span class="stringliteral">&quot;;\n&quot;</span>;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407     <span class="keywordflow">else</span>
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409         <span class="comment">//Not embedded font</span>
<a name="l00410"></a>00410         $s.=<span class="stringliteral">&#39;$file=&#39;</span>.<span class="stringliteral">&quot;&#39;&#39;;\n&quot;</span>;
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412     $s.=<span class="stringliteral">&quot;?&gt;\n&quot;</span>;
<a name="l00413"></a>00413     <a class="code" href="makefont_8php.html#a0b22290f31db868e1cae064d136b59af">SaveToFile</a>($basename.<span class="stringliteral">&#39;.php&#39;</span>,$s);
<a name="l00414"></a>00414     echo <span class="stringliteral">&#39;Font definition file generated (&#39;</span>.$basename.<span class="stringliteral">&#39;.php&#39;</span>.<span class="stringliteral">&#39;)&lt;BR&gt;&#39;</span>;
<a name="l00415"></a>00415 }
<a name="l00416"></a>00416 ?&gt;
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tout</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Structures de donnÃ©es</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Fichiers</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Fonctions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Ã‰numÃ©rations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
GÃ©nÃ©rÃ© le Lundi Avril 13 2015 22:05:26 pour GaliDAV par &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
